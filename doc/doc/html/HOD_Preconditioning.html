<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BUTTERFLYPACK v@PROJECT_VERSION@: HODLR &amp; HODBF Preconditioning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="../custom-style/my_customdoxygen.css" rel="stylesheet" type="text/css" />
<link href="my_customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname" style="font-family: silom;"><a href="#"><img src="logo.png" style="height:80px"></a>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('HOD_Preconditioning.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">HODLR &amp; HODBF Preconditioning </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><b>HODLR</b>, or Hierarchically Off-Diagonal Low Rank, is a rank-structured format that is similar to HSS, but simpler. It uses the same weak admissibility, i.e, all off-diagonal blocks are low rank, but it does not use nested bases. Compared to HSS, HODLR theoretically has worse asymptotic complexity, but the algorithms might be faster in practice for medium sized problems.</p>
<p ><b>HODBF</b> stands for Hierarchically Off-Diagonal Butterfly. HODBF is like HODLR except that it uses Butterfly decomposition instead of low rank. The HODBF format was specifically developed for dealing high frequency problems.</p>
<p >For a description of the HODBF format and its use in the sparse multifrontal solver see: <a class="el" href=""><a href="https://arxiv.org/abs/2007.00202">https://arxiv.org/abs/2007.00202</a> </a></p>
<p >STRUMPACK's HODLR code uses an external library, which can be found here: <a class="el" href=""><a href="https://github.com/liuyangzhuan/ButterflyPACK">https://github.com/liuyangzhuan/ButterflyPACK</a> </a></p>
<p >See the <a class="el" href="installation.html">Installation and Requirements</a> instructions for how to configure and compile STRUMPACK with support for HODLR.</p>
<p >HODLR compression in the sparse solver can be turned on/off via the command line:</p>
<div class="fragment"><div class="line">--sp_compression hodlr</div>
<div class="line">--sp_compression none    (disable compression)</div>
</div><!-- fragment --><p >or via the C++ API as follows</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> strumpack::SPOptions::set_compression(CompressionType::HODLR);</div>
<div class="line"><span class="keywordtype">void</span> strumpack::SPOptions::set_compression(CompressionType::NONE);</div>
<div class="line">CompressionType strumpack::SPOptions::compression() <span class="keyword">const</span>;  <span class="comment">// get compression type (none/hss/blr/hodlr)</span></div>
</div><!-- fragment --><p >In order to enable HODBF compression one should set the compression type to HODLR, and additionally set</p>
<div class="fragment"><div class="line">--hodlr_butterfly_levels l</div>
</div><!-- fragment --><p >where l is the number of levels in the HODLR hierarchy for which butterfly compression is to be used (instead of low-rank). A value of 1 means only the largest off-diagonal blocks are compressed using butterfly. To enable butterfly compression on all levels, simply use a large enough value, for instance 100.</p>
<p >When compression is enabled, the default STRUMPACK behavior is to use the approximate LU factorization as a preconditioner within GMRES. This behavior can also be changed, see <a class="el" href="">Solve</a>.</p>
<p >However, HODLR compression has a considerable overhead and only pays off for sufficiently large matrices. Therefore STRUMPACK has a tuning parameter to specify the minimum size a dense matrix needs to be to be considered a candidate for compression. The minimum dense matrix size for compression is set via the command line via</p>
<div class="fragment"><div class="line">--sp_compression_min_sep_size int</div>
</div><!-- fragment --><p >or via the C++ API as follows</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> strumpack::SPOptions::set_compression_min_sep_size(<span class="keywordtype">int</span> s);</div>
<div class="line"><span class="keywordtype">int</span> strumpack::SPOptions::compression_min_sep_size() <span class="keyword">const</span>;</div>
</div><!-- fragment --><p >The above options affect the use of HODLR within the multifrontal solver. There are more, HODLR specific, options which are stored in an object of type <a class="el" href="">HODLR::HODLROptions&lt;scalar&gt;</a>. An object of this type is stored in the <a class="el" href="">SPOptions&lt;scalar&gt;</a> object stored in the <a class="el" href="">StrumpackSparseSolver</a>. It can be accessed via the HODLR_options() routine as follows:</p>
<div class="fragment"><div class="line">strumpack::StrumpackSparseSolver&lt;double&gt; sp;          <span class="comment">// create solver object</span></div>
<div class="line">sp.options().set_compression(CompressionType::HODLR); <span class="comment">// enable HODLR compression in the multifrontal solver</span></div>
<div class="line">sp.options().HODLR_options().set_leaf_size(256);      <span class="comment">// set the HODLR leaf size</span></div>
</div><!-- fragment --><p ><b>The compression tolerances can greatly impact performance.</b> They can be set using:</p>
<div class="fragment"><div class="line">--hodlr_rel_tol real (<span class="keywordflow">default</span> 0.01)</div>
<div class="line">--hodlr_abs_tol real (<span class="keywordflow">default</span> 1e-08)</div>
</div><!-- fragment --><p >or via the C++ API</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> strumpack::HODLR::HODLROptions&lt;scalar&gt;::set_rel_tol(real rel_tol);</div>
<div class="line"><span class="keywordtype">void</span> strumpack::HODLR::HODLROptions&lt;scalar&gt;::set_abs_tol(real abs_tol);</div>
<div class="line">real strumpack::HODLR::HODLROptions&lt;scalar&gt;::rel_tol() <span class="keyword">const</span>;              <span class="comment">// get the current value</span></div>
<div class="line">real strumpack::HODLR::HODLROptions&lt;scalar&gt;::abs_tol() <span class="keyword">const</span>;</div>
</div><!-- fragment --> <hr  />
<p >Other options are available. See the documentation of <a class="el" href="">HODLROptions&lt;scalar&gt;</a> for more detailed information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="prec.html">Preconditioners</a></li>
    <li><a href="https://github.com/pghysels/STRUMPACK">STRUMPACK on Github</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
